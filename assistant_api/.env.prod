# --- RAG (Hybrid) ---
RAG_DB=./data/rag.sqlite                  # ship this file with the backend image
RAG_REPOS=leok974/ledger-mind,leok974/leo-portfolio

# Query-time embeddings (managed)
EMBED_MODEL_QUERY=text-embedding-3-small
OPENAI_API_KEY=

# --- LLM primary (Ollama via OpenAI-compatible API) ---
OPENAI_BASE_URL=http://ollama:11434/v1    # primary base URL (Ollama)
OPENAI_MODEL=gpt-oss:20b
PRIMARY_MODEL=gpt-oss:20b
OPENAI_API_KEY_OLLAMA=ollama              # dummy string for SDKs

# --- LLM fallback (OpenAI) ---
FALLBACK_BASE_URL=https://api.openai.com/v1
FALLBACK_MODEL=gpt-4o-mini                 # pick what you want
# Provide this via Docker/Compose secrets or env; never commit real keys
FALLBACK_API_KEY=

# --- CORS / security ---
ALLOWED_ORIGINS=https://leok974.github.io,https://app.ledger-mind.org,http://localhost:4173

# --- Dev Routes (disable in production) ---
ALLOW_DEV_ROUTES=0

# --- SEO JSON-LD Configuration ---
SEO_LD_ENABLED=1
SEO_LD_VALIDATE_STRICT=1
# SEO_LD_TYPES=WebSite,WebPage,BreadcrumbList,Person,Organization,CreativeWork,Article,VideoObject,ImageObject

# --- Cloudflare Access ---
CF_ACCESS_TEAM_DOMAIN=ledgermind.cloudflareaccess.com
CF_ACCESS_AUD=931455ccf7b07230bdf7ed30be7f308abd842f28f954a118e75e062a316635d2
ACCESS_ALLOWED_EMAILS=leoklemet.pa@gmail.com
# For service tokens, use the Client ID (common_name in JWT), not the token name
ACCESS_ALLOWED_SERVICE_SUBS=bcf632e4a22f6a8007d47039038904b7.access

# --- SiteAgent HMAC Authentication ---
# Generate a strong secret: openssl rand -hex 32
# Must match the SITEAGENT_HMAC_SECRET in GitHub Secrets
SITEAGENT_HMAC_SECRET=QeOn4Cf0J6Gh7HH2uRd6U0fbrHc0QuN4ijf5bGMljxQ=

# --- SiteAgent Configuration ---
SITEAGENT_REPOS=leok974/ledger-mind,leok974/leo-portfolio

# --- SiteAgent Logo Fetch Security ---
# Maximum logo file size in MB (default: 3)
SITEAGENT_LOGO_MAX_MB=3
# Allow plain HTTP downloads (default: false, requires HTTPS)
# SITEAGENT_LOGO_ALLOW_HTTP=1
# Allowed host suffixes for logo downloads (comma-separated, optional)
# Example: githubusercontent.com,raw.githubusercontent.com,cdn.jsdelivr.net
# SITEAGENT_LOGO_HOSTS=githubusercontent.com,cdn.jsdelivr.net

