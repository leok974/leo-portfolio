<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Leo Klemet â€” AI Engineer Â· SWE Â· Generative AI / 3D Artist & Creative Technologist</title>
  <meta name="description" content="Leo Klemet â€” AI Engineer & SWE. Building agents, analytics, and cinematic creative pipelines: LedgerMind, DataPipe AI, Clarity Companion." />
  <link rel="canonical" href="https://leok974.github.io/leo-portfolio/" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Leo Klemet â€” AI Engineer Â· SWE Â· Generative AI / 3D Artist" />
  <meta property="og:description" content="Projects in AI Agents, ML/Analytics, 3D/Generative Art, DevOps." />
  <meta property="og:image" content="https://leok974.github.io/leo-portfolio/assets/optimized/og-cover.jpg" />
  <meta property="og:url" content="https://leok974.github.io/leo-portfolio/" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="assets/optimized/leo-avatar-xs.png" type="image/png">
  <link rel="apple-touch-icon" href="assets/optimized/leo-avatar-sm.png">
  <link rel="preload" href="fonts/Inter-roman.var.woff2" as="font" type="font/woff2" crossorigin>
  <style>
    @font-face {
      font-family: 'Inter var';
      font-style: normal;
      font-weight: 100 900;
      font-display: swap;
      src: url('fonts/Inter-roman.var.woff2') format('woff2-variations');
    }
    @font-face {
      font-family: 'Inter var';
      font-style: italic;
      font-weight: 100 900;
      font-display: swap;
      src: url('fonts/Inter-italic.var.woff2') format('woff2-variations');
    }
  </style>
  <style>
    /* Critical CSS: minimal layout to paint above-the-fold quickly */
    :root{--bg:#0b1020;--bg-elev:#0f172a;--text:#e5e7eb;--muted:#94a3b8;--border:#1f2937}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;line-height:1.6;color:var(--text);background:var(--bg)}
    header{position:sticky;top:0;z-index:50;background:#0f172acc;border-bottom:1px solid var(--border)}
    .container{width:min(1200px,92vw);margin-inline:auto}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:.85rem 0}
    nav ul{display:flex;gap:1rem;list-style:none;margin:0;padding:0}
    .hero{padding:clamp(3rem,6vw + 1rem,7rem) 0;display:grid;grid-template-columns:1.2fr .8fr;gap:2rem;align-items:center}
    @media(max-width:900px){.hero{grid-template-columns:1fr}}
    .headline{font-size:clamp(1.8rem,2.3rem + 1.5vw,3.2rem);line-height:1.15;margin:0 0 1rem}
    .subline{color:var(--muted);margin:0 0 1.5rem}
    .hero-visual{aspect-ratio:4/3;border:1px solid var(--border);border-radius:1rem;overflow:hidden;background:#111827}
  </style>

  <link rel="preload" as="style" href="styles.74e2bb05ef.css">
  <link rel="stylesheet" href="styles.74e2bb05ef.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="styles.74e2bb05ef.css"></noscript>
  <style>:root{--font-sans:"Inter var","Inter",system-ui,-apple-system,Segoe UI,Roboto,sans-serif}html{font-family:var(--font-sans)}</style>
  <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Person",
        "@id": "https://leok974.github.io/leo-portfolio/#person",
        "name": "Leo Klemet",
        "description": "AI Engineer Â· SWE Â· Generative AI / 3D Artist & Creative Technologist",
        "url": "https://leok974.github.io/leo-portfolio/",
        "jobTitle": "AI Engineer",
        "sameAs": [
          "https://github.com/leok974"
        ]
      },
      {
        "@type": "Organization",
        "@id": "https://leok974.github.io/leo-portfolio/#org",
        "name": "Leo Klemet Studio",
        "url": "https://leok974.github.io/leo-portfolio/",
        "member": { "@id": "https://leok974.github.io/leo-portfolio/#person" }
      },
      {
        "@type": "WebSite",
        "@id": "https://leok974.github.io/leo-portfolio/#website",
        "url": "https://leok974.github.io/leo-portfolio/",
        "name": "Leo Klemet Portfolio",
        "inLanguage": "en",
        "author": { "@id": "https://leok974.github.io/leo-portfolio/#person" }
      }
    ]
  }</script>
  <!-- New bottom-right assistant chip styles -->
  <style>
    /* Kill old assistants/avatars; keep the new chip widget */
    #leo-assistant, #la-open, #la-panel,
    #ai-avatar-wrap, #ai-controls, #ai-text,
    #live2d-wrap, #vrm-wrap, #riv-wrap,
    #svg-avatar-wrap, #svg-mascot {
      display: none !important;
    }
    #assistant-chip { position: fixed; right: max(16px, env(safe-area-inset-right)); bottom: max(16px, env(safe-area-inset-bottom)); z-index: 2147483643; }
    #assistant-chip-btn { border:1px solid #2a3357; padding:.55rem .8rem; border-radius:999px; background:#121a2e; color:#e8ecf8; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,.3); }
    #assistant-chip-btn:hover { background:#0f1830; }
    @media (prefers-reduced-motion: reduce){ #assistant-chip-btn { transition:none !important; } }

    /* Lightweight assistant panel */
    #assistant-panel { position: fixed; right: max(16px, env(safe-area-inset-right)); bottom: max(16px, env(safe-area-inset-bottom));
      width: min(92vw, 420px); max-height: min(60vh, 520px); display: none; flex-direction: column; gap: .6rem;
      border: 1px solid #2a3357; border-radius: 12px; background: rgba(16,22,42,.96); backdrop-filter: blur(8px);
      box-shadow: 0 16px 40px rgba(0,0,0,.35); padding: .8rem; z-index: 2147483644; }
    #assistant-panel .head { display:flex; align-items:center; justify-content:space-between; gap:.5rem; }
    #assistant-panel .head strong { font-weight: 600; }
    #assistant-close { border:1px solid #2a3357; background:#0f162f; color:#e8ecf8; border-radius:8px; padding:.25rem .5rem; cursor:pointer; }
    #assistant-log { flex:1; min-height: 140px; max-height: 320px; overflow:auto; border:1px solid #2a3357; border-radius:8px; padding:.6rem; background:#0b1223; }
    #assistant-log .msg { margin:.25rem 0; }
    #assistant-log .you { color:#a5b4fc; }
    #assistant-log .ai  { color:#e5e7eb; }
    #assistant-form { display:flex; gap:.5rem; }
    #assistant-input { flex:1; border:1px solid #2a3357; background:#0b1223; color:#e8ecf8; border-radius:8px; padding:.55rem .7rem; }
    #assistant-form .btn { border:1px solid #2a3357; background:#121a2e; color:#e8ecf8; border-radius:8px; padding:.55rem .7rem; cursor:pointer; }
  </style>

</head>
<body>
  <!-- Minimal kill-switch for old bottom-right widget (kept for safety) -->
  <script>
    window.USE_BOTTOM_RIGHT_ASSISTANT = false;
    document.addEventListener('DOMContentLoaded', () => {
      document.body.classList.remove('assistant-open');
      if (document.body && document.body.style) document.body.style.paddingBottom = '';
    });
  </script>

  <!-- New bottom-right assistant chip (markup + init) -->
  <div id="assistant-chip" role="region" aria-label="Assistant">
    <button id="assistant-chip-btn" class="btn" aria-label="Ask about my projects">
      ðŸ¤– Ask about my projectsâ€¦
    </button>
  </div>

  <!-- Lightweight assistant panel (hidden by default) -->
  <div id="assistant-panel" role="dialog" aria-modal="false" aria-label="Assistant panel">
    <div class="head">
      <strong>Leoâ€™s Assistant</strong>
      <button id="assistant-close" class="btn" aria-label="Close">âœ•</button>
    </div>
    <div id="assistant-log" class="log" aria-live="polite"></div>
    <form id="assistant-form">
      <input id="assistant-input" placeholder="Ask: which project fits data engineering?" autocomplete="off" />
      <button class="btn" type="submit">Send</button>
    </form>
  </div>
  <script>
    if (!window.__assistantInit) {
      window.__assistantInit = true;
      (function(){
        const ENABLE_ASSISTANT = ['leok974.github.io','localhost','127.0.0.1'].includes(location.hostname);
        // Runtime sweep in case old blocks sneak in
        ['leo-assistant','la-open','la-panel','ai-avatar-wrap','live2d-wrap','vrm-wrap','riv-wrap','svg-avatar-wrap','svg-mascot']
          .forEach(id => document.getElementById(id)?.remove());
        const wrap = document.getElementById('assistant-chip');
        const btn = document.getElementById('assistant-chip-btn');
        const panel = document.getElementById('assistant-panel');
        const closeBtn = document.getElementById('assistant-close');
        const form = document.getElementById('assistant-form');
        const input = document.getElementById('assistant-input');
        const log = document.getElementById('assistant-log');
        const API_BASE = 'https://assistant.ledger-mind.org';
        const API_STREAM = API_BASE + '/chat/stream';
        const API_NON_STREAM = API_BASE + '/chat';
        const msgs = [];
        // Client-side system prompt snippet to complement backend prompt
        const CLIENT_SYSTEM = {
          role: 'system',
          content: (
            "You are Leoâ€™s portfolio assistant. Answer concisely with exactly one most relevant project. " +
            "Format: 1 short value sentence + 3 bullets (Tech, Impact, Why hireable). " +
            "Close with: [Case Study] â€¢ [GitHub] â€¢ [Schedule]. If unclear, ask one brief clarifying question first."
          )
        };
        const context = {};
        if (!ENABLE_ASSISTANT){ if (wrap) wrap.style.display='none'; if (panel) panel.style.display='none'; return; }

        // Load small context from projects.json
        (async () => {
          try {
            const res = await fetch('projects.json', { cache: 'no-store' });
            const data = await res.json();
            const take = (data.projects||[]).slice(0,6)
              .map(p=>`â€¢ ${p.title}: ${p.description} [${(p.tags||[]).join(', ')}]`).join('\n');
            context.summary = `Projects:\n${take}`;
          } catch {}
        })();

        // Helpers
        function append(role, text){
          const div = document.createElement('div');
          div.className = 'msg ' + (role === 'user' ? 'you' : 'ai');
          div.textContent = (role === 'user' ? 'You: ' : 'Assistant: ') + text;
          log.appendChild(div);
          log.scrollTop = log.scrollHeight;
        }
        function openPanel(){
          if (!panel) return;
          panel.style.display = 'flex';
          document.body.classList.add('assistant-open');
          queueMicrotask(()=>{
            const pad = (panel.offsetHeight||0) + 24;
            document.body.style.paddingBottom = pad + 'px';
            input?.focus();
          });
        }
        function closePanel(){
          if (!panel) return;
          panel.style.display = 'none';
          document.body.classList.remove('assistant-open');
          document.body.style.paddingBottom = '';
        }
        document.addEventListener('keydown', (e)=>{
          if (e.key === 'Escape' && panel && panel.style.display !== 'none') closePanel();
        });

        // Streaming via SSE with fallback
        async function streamChat(payload){
          const res = await fetch(API_STREAM, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
          if (!res.ok || !res.body) throw new Error('stream failed');
          const reader = res.body.getReader();
          const decoder = new TextDecoder();
          let buffer = '';
          let answer = '';
          while(true){
            const { value, done } = await reader.read();
            if (done) break;
            buffer += decoder.decode(value, { stream: true });
            let sep;
            while((sep = buffer.indexOf('\n\n')) !== -1){
              const chunk = buffer.slice(0, sep);
              buffer = buffer.slice(sep + 2);
              const lines = chunk.split('\n').map(l=>l.trim()).filter(Boolean);
              for(const l of lines){
                if(!l.startsWith('data:')) continue;
                const data = l.slice(5).trim();
                if(data === '[DONE]'){
                  log.lastChild?.classList.add('done');
                  msgs.push({ role:'assistant', content: answer });
                  return;
                }
                try{
                  const j = JSON.parse(data);
                  const choice = (j.choices && j.choices[0]) || {};
                  const delta = (choice.delta && choice.delta.content) || '';
                  const finish = choice.finish_reason || null;
                  if(delta){
                    answer += delta;
                    if (!log.lastChild || !log.lastChild.classList.contains('ai')) append('assistant', '');
                    log.lastChild.textContent = 'Assistant: ' + answer;
                    log.scrollTop = log.scrollHeight;
                  }
                  if(finish){
                    log.lastChild?.classList.add('done');
                    msgs.push({ role:'assistant', content: answer });
                    return;
                  }
                }catch{}
              }
            }
          }
        }

        async function nonStreamChat(payload){
          const res = await fetch(API_NON_STREAM, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
          const data = await res.json();
          const text = data.assistant || '(no response)';
          if (!log.lastChild || !log.lastChild.classList.contains('ai')) append('assistant', '');
          log.lastChild.textContent = 'Assistant: ' + text;
          msgs.push({ role:'assistant', content: text });
        }

        // Wire UI
        btn?.addEventListener('click', openPanel);
        closeBtn?.addEventListener('click', closePanel);
        form?.addEventListener('submit', async (e)=>{
          e.preventDefault();
          const content = (input?.value || '').trim();
          if (!content) return;
          input.value = '';
          msgs.push({ role:'user', content });
          append('user', content);
          append('assistant', 'Thinkingâ€¦');
          try {
            await streamChat({ messages: [CLIENT_SYSTEM, ...msgs], context, stream: true });
          } catch {
            try { await nonStreamChat({ messages: [CLIENT_SYSTEM, ...msgs], context }); }
            catch { if (log.lastChild) log.lastChild.textContent = 'Assistant: (connection failed â€” please try again later)'; }
          }
        });

      })();
    }
  </script>

</body>
</html>
