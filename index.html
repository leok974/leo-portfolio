<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Leo Klemet ‚Äî AI Engineer ¬∑ SWE ¬∑ Generative AI / 3D Artist & Creative Technologist</title>
  <meta name="description" content="Leo Klemet ‚Äî AI Engineer & SWE. Building agents, analytics, and cinematic creative pipelines: LedgerMind, DataPipe AI, Clarity Companion." />
  <link rel="canonical" href="https://leok974.github.io/leo-portfolio/" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Leo Klemet ‚Äî AI Engineer ¬∑ SWE ¬∑ Generative AI / 3D Artist" />
  <meta property="og:description" content="Projects in AI Agents, ML/Analytics, 3D/Generative Art, DevOps." />
  <meta property="og:image" content="https://leok974.github.io/leo-portfolio/assets/optimized/og-cover.jpg" />
  <meta property="og:url" content="https://leok974.github.io/leo-portfolio/" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="assets/optimized/leo-avatar-xs.png" type="image/png">
  <link rel="apple-touch-icon" href="assets/optimized/leo-avatar-sm.png">
  <link rel="preload" href="fonts/Inter-roman.var.woff2" as="font" type="font/woff2" crossorigin>
  <style>
    @font-face {
      font-family: 'Inter var';
      font-style: normal;
      font-weight: 100 900;
      font-display: swap;
      src: url('fonts/Inter-roman.var.woff2') format('woff2-variations');
    }
    @font-face {
      font-family: 'Inter var';
      font-style: italic;
      font-weight: 100 900;
      font-display: swap;
      src: url('fonts/Inter-italic.var.woff2') format('woff2-variations');
    }
  </style>
  <style>
    /* Critical CSS: minimal layout to paint above-the-fold quickly */
    :root{--bg:#0b1020;--bg-elev:#0f172a;--text:#e5e7eb;--muted:#94a3b8;--border:#1f2937}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;line-height:1.6;color:var(--text);background:var(--bg)}
    header{position:sticky;top:0;z-index:50;background:#0f172acc;border-bottom:1px solid var(--border)}
    .container{width:min(1200px,92vw);margin-inline:auto}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:.85rem 0}
    nav ul{display:flex;gap:1rem;list-style:none;margin:0;padding:0}
    .hero{padding:clamp(3rem,6vw + 1rem,7rem) 0;display:grid;grid-template-columns:1.2fr .8fr;gap:2rem;align-items:center}
    @media(max-width:900px){.hero{grid-template-columns:1fr}}
    .headline{font-size:clamp(1.8rem,2.3rem + 1.5vw,3.2rem);line-height:1.15;margin:0 0 1rem}
    .subline{color:var(--muted);margin:0 0 1.5rem}
    .hero-visual{aspect-ratio:4/3;border:1px solid var(--border);border-radius:1rem;overflow:hidden;background:#111827}
  </style>

  <link rel="preload" as="style" href="styles.74e2bb05ef.css">
  <link rel="stylesheet" href="styles.74e2bb05ef.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="styles.74e2bb05ef.css"></noscript>
  <style>:root{--font-sans:"Inter var","Inter",system-ui,-apple-system,Segoe UI,Roboto,sans-serif}html{font-family:var(--font-sans)}</style>
  <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Person",
        "@id": "https://leok974.github.io/leo-portfolio/#person",
        "name": "Leo Klemet",
        "description": "AI Engineer ¬∑ SWE ¬∑ Generative AI / 3D Artist & Creative Technologist",
        "url": "https://leok974.github.io/leo-portfolio/",
        "jobTitle": "AI Engineer",
        "sameAs": [
          "https://github.com/leok974"
        ]
      },
      {
        "@type": "Organization",
        "@id": "https://leok974.github.io/leo-portfolio/#org",
        "name": "Leo Klemet Studio",
        "url": "https://leok974.github.io/leo-portfolio/",
        "member": { "@id": "https://leok974.github.io/leo-portfolio/#person" }
      },
      {
        "@type": "WebSite",
        "@id": "https://leok974.github.io/leo-portfolio/#website",
        "url": "https://leok974.github.io/leo-portfolio/",
        "name": "Leo Klemet Portfolio",
        "inLanguage": "en",
        "author": { "@id": "https://leok974.github.io/leo-portfolio/#person" },
        "publisher": { "@id": "https://leok974.github.io/leo-portfolio/#org" }
      },
      {
        "@type": "BreadcrumbList",
        "@id": "https://leok974.github.io/leo-portfolio/#breadcrumb",
        "itemListElement": [
          { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://leok974.github.io/leo-portfolio/" },
          { "@type": "ListItem", "position": 2, "name": "Projects", "item": "https://leok974.github.io/leo-portfolio/#projects" }
        ]
      }
    ]
  }</script>
</head>
<body>
  <a class="sr-only skip-link" href="#main">Skip to content</a>
  <header>
    <div class="container nav">
  <div class="brand"><a href="./" class="brand-link">
        <picture>
          <source type="image/avif" srcset="assets/optimized/leo-avatar-xs.avif 160w, assets/optimized/leo-avatar-sm.avif 320w" sizes="28px">
          <source type="image/webp" srcset="assets/optimized/leo-avatar-xs.webp 160w, assets/optimized/leo-avatar-sm.webp 320w" sizes="28px">
          <source type="image/jpeg" srcset="assets/optimized/leo-avatar-xs.jpg 160w, assets/optimized/leo-avatar-sm.jpg 320w" sizes="28px">
          <img src="assets/leo-avatar.svg" alt="" width="28" height="28" decoding="async" />
        </picture>
        <span>Leo Klemet</span>
      </a></div>
      <nav aria-label="Primary">
        <ul>
          <li><a href="#projects">Projects</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
          <li><a href="#blog">Blog</a></li>
        </ul>
      </nav>
      <button class="theme-toggle" id="themeToggle" aria-pressed="false" aria-label="Toggle dark/light mode">
        <span aria-hidden="true">üåô</span>
        <span aria-hidden="true">‚òÄÔ∏è</span>
      </button>
    </div>
  </header>

  <!-- HERO / LANDING -->
  <main id="main">
  <section class="hero container" id="home">
    <div>
      <h1 class="headline">Leo Klemet ‚Äî AI Engineer ¬∑ SWE ¬∑ Generative AI / 3D Artist & Creative Technologist</h1>
      <span class="availability-badge" role="note">Open to roles in AI Engineering, SWE, or Creative Tech</span>
      <p class="subline">Building agents, analytics, and cinematic creative pipelines.</p>
      <div class="cta-group">
        <a class="cta" href="#projects">‚ü∂ See My Work</a>
        <a class="cta secondary" href="assets/Leo-Klemet-Resume.pdf" download title="Download Resume PDF">üìÑ Download Resume</a>
      </div>
      <p class="muted" style="margin-top:.75rem">Tip: Use the category filters to explore AI Agents, ML/Analytics, 3D & Generative Art, and DevOps/Security projects.</p>
    </div>
    <div class="hero-visual hero-media">
      <picture>
        <source type="image/avif" srcset="assets/optimized/hero-poster-sm.avif 400w, assets/optimized/hero-poster-md.avif 800w, assets/optimized/hero-poster-lg.avif 1200w, assets/optimized/hero-poster-xl.avif 1920w" sizes="(max-width: 900px) 100vw, 50vw">
        <source type="image/webp" srcset="assets/optimized/hero-poster-sm.webp 400w, assets/optimized/hero-poster-md.webp 800w, assets/optimized/hero-poster-lg.webp 1200w, assets/optimized/hero-poster-xl.webp 1920w" sizes="(max-width: 900px) 100vw, 50vw">
        <source type="image/jpeg" srcset="assets/optimized/hero-poster-sm.jpg 400w, assets/optimized/hero-poster-md.jpg 800w, assets/optimized/hero-poster-lg.jpg 1200w, assets/optimized/hero-poster-xl.jpg 1920w" sizes="(max-width: 900px) 100vw, 50vw">
        <img id="hero-poster" src="assets/optimized/hero-poster-lg.webp" width="1200" height="800" alt="" decoding="async" fetchpriority="high" style="aspect-ratio:3/2;width:100%;height:100%;object-fit:cover;border-radius:16px;display:block">
      </picture>
      <div class="orb" aria-hidden="true"></div>
      <div class="orb2" aria-hidden="true"></div>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects">
    <div class="container">
      <div class="section-head">
        <h2 class="section-title">Projects</h2>
        <div class="filters" role="toolbar" aria-label="Project filters">
          <button class="chip" data-filter="all" aria-pressed="true">All</button>
          <button class="chip" data-filter="agents">AI Agents & Apps</button>
          <button class="chip" data-filter="ml">ML / Analytics</button>
          <button class="chip" data-filter="art">3D & Generative Art</button>
          <button class="chip" data-filter="devops">DevOps & Security</button>
        </div>
      </div>

      <div class="grid" id="projectGrid" aria-live="polite">
        <!-- CARD: LedgerMind -->
  <article class="card card-click" data-slug="ledgermind" data-cats="agents ml devops" role="link" tabindex="0">
          <div class="thumb">
            <picture>
              <source type="image/avif" srcset="assets/optimized/ledgermind-cover-sm.avif 400w, assets/optimized/ledgermind-cover-md.avif 800w, assets/optimized/ledgermind-cover-lg.avif 1200w, assets/optimized/ledgermind-cover-xl.avif 1920w" sizes="(max-width: 600px) 100vw, 33vw">
              <source type="image/webp" srcset="assets/optimized/ledgermind-cover-sm.webp 400w, assets/optimized/ledgermind-cover-md.webp 800w, assets/optimized/ledgermind-cover-lg.webp 1200w, assets/optimized/ledgermind-cover-xl.webp 1920w" sizes="(max-width: 600px) 100vw, 33vw">
              <source type="image/jpeg" srcset="assets/optimized/ledgermind-cover-sm.jpg 400w, assets/optimized/ledgermind-cover-md.jpg 800w, assets/optimized/ledgermind-cover-lg.jpg 1200w, assets/optimized/ledgermind-cover-xl.jpg 1920w" sizes="(max-width: 600px) 100vw, 33vw">
              <img loading="lazy" decoding="async" src="assets/ledgermind-cover.svg" alt="LedgerMind dashboard with charts and AI assistant" width="1200" height="675" />
            </picture>
          </div>
          <div class="card-body">
            <h3 class="card-title">LedgerMind</h3>
            <p class="muted">AI‚Äëpowered personal finance agent with grounded analytics, budgets, and explainable suggestions. Local/Cloud deploy.</p>
            <div class="tags">
              <span class="tag">FastAPI</span><span class="tag">React</span><span class="tag">Postgres</span><span class="tag">Ollama/OpenAI</span>
            </div>
            <div class="card-actions">
              <a class="btn" href="projects/ledgermind.html">Case Study</a>
              <button class="btn" type="button" data-detail="ledgermind">Quick View</button>
              <a class="btn" href="https://github.com/leok974/ai-finance-agent-oss" target="_blank" rel="noopener">GitHub</a>
              <a class="btn" href="https://app.ledger-mind.org" target="_blank" rel="noopener">Live</a>
            </div>
          </div>
        </article>

        <!-- CARD: DataPipe AI -->
  <article class="card card-click" data-slug="datapipe-ai" data-cats="agents ml devops" role="link" tabindex="0">
          <div class="thumb">
            <picture>
              <source type="image/avif" srcset="assets/optimized/datapipe-ai-cover-sm.avif 400w, assets/optimized/datapipe-ai-cover-md.avif 800w, assets/optimized/datapipe-ai-cover-lg.avif 1200w, assets/optimized/datapipe-ai-cover-xl.avif 1920w" sizes="(max-width: 600px) 100vw, 33vw">
              <source type="image/webp" srcset="assets/optimized/datapipe-ai-cover-sm.webp 400w, assets/optimized/datapipe-ai-cover-md.webp 800w, assets/optimized/datapipe-ai-cover-lg.webp 1200w, assets/optimized/datapipe-ai-cover-xl.webp 1920w" sizes="(max-width: 600px) 100vw, 33vw">
              <source type="image/jpeg" srcset="assets/optimized/datapipe-ai-cover-sm.jpg 400w, assets/optimized/datapipe-ai-cover-md.jpg 800w, assets/optimized/datapipe-ai-cover-lg.jpg 1200w, assets/optimized/datapipe-ai-cover-xl.jpg 1920w" sizes="(max-width: 600px) 100vw, 33vw">
              <img loading="lazy" decoding="async" src="assets/datapipe-ai-cover.svg" alt="DataPipe AI ops dashboard with GKE integration" width="1200" height="675" />
            </picture>
          </div>
          <div class="card-body">
            <h3 class="card-title">DataPipe AI</h3>
            <p class="muted">AI-powered ops agent for GKE deployments with automated data pipeline management and intelligent monitoring.</p>
            <div class="tags">
              <span class="tag">GKE</span><span class="tag">Kubernetes</span><span class="tag">AI Ops</span><span class="tag">Data Pipeline</span>
            </div>
            <div class="card-actions">
              <a class="btn" href="projects/datapipe-ai.html">Case Study</a>
              <button class="btn" type="button" data-detail="datapipe-ai">Quick View</button>
              <a class="btn" href="https://github.com/leok974/ai-ops-agent-gke" target="_blank" rel="noopener">GitHub</a>
            </div>
          </div>
        </article>

        <!-- CARD: Clarity Companion (Chrome Ext) -->
  <article class="card card-click" data-slug="clarity" data-cats="agents devops" role="link" tabindex="0">
          <div class="thumb">
            <picture>
              <source type="image/avif" srcset="assets/optimized/clarity-companion-sm.avif 400w, assets/optimized/clarity-companion-md.avif 800w, assets/optimized/clarity-companion-lg.avif 1200w, assets/optimized/clarity-companion-xl.avif 1920w" sizes="(max-width: 600px) 100vw, 33vw">
              <source type="image/webp" srcset="assets/optimized/clarity-companion-sm.webp 400w, assets/optimized/clarity-companion-md.webp 800w, assets/optimized/clarity-companion-lg.webp 1200w, assets/optimized/clarity-companion-xl.webp 1920w" sizes="(max-width: 600px) 100vw, 33vw">
              <source type="image/jpeg" srcset="assets/optimized/clarity-companion-sm.jpg 400w, assets/optimized/clarity-companion-md.jpg 800w, assets/optimized/clarity-companion-lg.jpg 1200w, assets/optimized/clarity-companion-xl.jpg 1920w" sizes="(max-width: 600px) 100vw, 33vw">
              <img loading="lazy" decoding="async" src="assets/clarity-companion.svg" alt="Clarity Companion Chrome extension panel UI" width="1200" height="675" />
            </picture>
          </div>
          <div class="card-body">
            <h3 class="card-title">Clarity Companion (Chrome Extension)</h3>
            <p class="muted">On‚Äëdevice writing clarity assistant with localization, coverage gates, and CI packaging.</p>
            <div class="tags">
              <span class="tag">MV3</span><span class="tag">TypeScript</span><span class="tag">CI/CD</span>
            </div>
            <div class="card-actions">
              <a class="btn" href="projects/clarity.html">Case Study</a>
              <button class="btn" type="button" data-detail="clarity">Quick View</button>
              <a class="btn" href="https://github.com/" target="_blank" rel="noopener">GitHub</a>
            </div>
          </div>
        </article>

      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about">
    <div class="container">
      <div class="section-head">
        <h2 class="section-title">About Me</h2>
        <p class="muted">AI Engineer ¬∑ Software Engineer ¬∑ Generative AI / 3D Artist & Creative Technologist</p>
      </div>
      <div class="about">
        <div>
          <picture>
            <source type="image/avif" srcset="assets/optimized/leo-avatar-xs.avif 160w, assets/optimized/leo-avatar-sm.avif 320w" sizes="140px">
            <source type="image/webp" srcset="assets/optimized/leo-avatar-xs.webp 160w, assets/optimized/leo-avatar-sm.webp 320w" sizes="140px">
            <source type="image/jpeg" srcset="assets/optimized/leo-avatar-xs.jpg 160w, assets/optimized/leo-avatar-sm.jpg 320w" sizes="140px">
            <img class="avatar" src="assets/leo-avatar.svg" alt="Portrait of Leo Klemet" width="140" height="140" loading="lazy" decoding="async" />
          </picture>
        </div>
        <div>
          <p>Hey, I‚Äôm Leo ‚Äî I build agentic apps, grounded analytics, and cinematic creative pipelines. I love shipping fast, clean systems that balance reliable infra with playful, art‚Äëdriven UX.</p>
          <div class="skills" aria-label="Skills by domain">
            <div class="skill-box">
              <h3>AI / ML</h3>
              <ul>
                <li>PyTorch, TensorFlow, embeddings, RAG</li>
                <li>Ollama, OpenAI API, evals</li>
                <li>Classifiers, forecasting, explainability</li>
              </ul>
            </div>
            <div class="skill-box">
              <h3>Backend</h3>
              <ul>
                <li>FastAPI, Postgres, Alembic</li>
                <li>OAuth/Authlib, JWT cookies + CSRF</li>
                <li>Report exports (PDF/XLSX)</li>
              </ul>
            </div>
            <div class="skill-box">
              <h3>Frontend</h3>
              <ul>
                <li>React, Vite, TypeScript, Tailwind</li>
                <li>shadcn, Recharts, accessibility</li>
              </ul>
            </div>
            <div class="skill-box">
              <h3>MLOps / Infra</h3>
              <ul>
                <li>Docker, GitHub Actions, CI/CD</li>
                <li>Cloudflare Tunnel, GCP KMS, Nginx</li>
                <li>Secrets, observability, security</li>
              </ul>
            </div>
            <div class="skill-box">
              <h3>3D / Creative</h3>
              <ul>
                <li>Blender, Substance Painter</li>
                <li>ComfyUI, LoRA/SDXL, Runway</li>
                <li>Storyboards, editing, sound</li>
              </ul>
            </div>
            <div class="skill-box">
              <h3>Resume</h3>
              <ul>
                <li><a class="btn" href="assets/docs/Leo-Klemet-Resume.pdf" download>Download PDF</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact">
    <div class="container">
      <div class="section-head">
        <h2 class="section-title">Contact</h2>
        <p class="muted">Let‚Äôs collaborate or chat about roles, freelance, and experiments.</p>
      </div>
      <div class="work-together" aria-labelledby="workTogetherHeading">
        <div class="work-together-text">
          <h3 id="workTogetherHeading">Let‚Äôs Work Together</h3>
          <p class="muted">Have a role, project, or idea you‚Äôd like to ship quickly with a strong engineering + creative lens? Reach out directly or connect on platforms below.</p>
          <div class="cta-buttons" role="group" aria-label="Direct contact links">
            <a class="cta" href="mailto:leoklemet.pa@gmail.com" aria-label="Email Leo">‚úâ Email</a>
            <a class="cta" href="https://calendly.com/leo-klemet/30min" target="_blank" rel="noopener" aria-label="Schedule a call on Calendly">üóì Schedule</a>
            <a class="cta" href="assets/docs/Leo-Klemet-Resume.pdf" target="_blank" rel="noopener" aria-label="View Leo's resume PDF">üìÑ Resume</a>
            <a class="cta" href="https://www.linkedin.com/in/leo-klemet-1241662a6/" target="_blank" rel="noopener" aria-label="LinkedIn profile">in LinkedIn</a>
            <a class="cta" href="https://github.com/leok974" target="_blank" rel="noopener" aria-label="GitHub profile">‚òÖ GitHub</a>
            <a class="cta" href="https://leoklemet3.artstation.com" target="_blank" rel="noopener" aria-label="ArtStation portfolio">üé® ArtStation</a>
            <a class="cta" href="tel:+12024401027" aria-label="Call Leo">üìû Call</a>
          </div>
        </div>
        <div class="resume-pane" aria-labelledby="resumeHeading">
          <h4 id="resumeHeading" style="margin-top:0">Resume</h4>
          <div class="resume-embed">
            <p class="muted">Preview available after upload. <a class="btn" href="assets/docs/Leo-Klemet-Resume.pdf" download>Download Resume</a></p>
          </div>
          <div class="resume-actions">
            <a class="btn" href="assets/docs/Leo-Klemet-Resume.pdf" download aria-label="Download resume PDF">Download PDF</a>
            <a class="btn" href="assets/docs/Leo-Klemet-Resume.pdf" target="_blank" rel="noopener" aria-label="Open resume in new tab">Open in New Tab ‚Üó</a>
          </div>
        </div>
      </div>
      <form name="contact" method="POST" data-netlify="true" novalidate>
        <input type="hidden" name="form-name" value="contact" />
        <div>
          <label for="name">Name *</label>
          <input id="name" name="name" autocomplete="name" required aria-describedby="name-error" />
          <div id="name-error" class="error-message" aria-live="polite"></div>
        </div>
        <div>
          <label for="email">Email *</label>
          <input id="email" name="email" type="email" autocomplete="email" required aria-describedby="email-error" />
          <div id="email-error" class="error-message" aria-live="polite"></div>
        </div>
        <div>
          <label for="message">Message *</label>
          <textarea id="message" name="message" placeholder="What would you like to build together?" required aria-describedby="message-error"></textarea>
          <div id="message-error" class="error-message" aria-live="polite"></div>
        </div>
        <button class="btn submit" type="submit">Send Message</button>
      </form>
  <p class="muted" style="margin-top:1rem">Find me on <a href="https://www.linkedin.com/in/leo-klemet-1241662a6/" target="_blank" rel="noopener noreferrer">LinkedIn</a> ¬∑ <a href="https://github.com/leok974" target="_blank" rel="noopener noreferrer">GitHub</a> ¬∑ <a href="https://leoklemet3.artstation.com" target="_blank" rel="noopener noreferrer">ArtStation</a></p>
    </div>
  </section>

  <!-- BLOG / UPDATES (optional) -->
  <section id="blog">
    <div class="container">
      <div class="section-head">
        <h2 class="section-title">Blog ¬∑ Updates</h2>
        <p class="muted">Hackathons, experiments, and devlogs.</p>
      </div>
      <div class="posts">
        <article class="post">
          <h3>Local GPT‚ÄëOSS + Agents for Finance</h3>
          <p class="muted">A deep‚Äëdive into grounded NL ‚Üí SQL, analytics orchestration, and privacy‚Äëfirst design.</p>
        </article>
        <article class="post">
          <h3>From Storyboard to Sprite Sheet</h3>
          <p class="muted">How Pixel Banana Suite turns pose prompts into crisp, animatable sprites.</p>
        </article>
      </div>
    </div>
  </section>

  </main>
  <!-- FOOTER -->
  <footer>
    <div class="container footer-grid">
      <div>¬© <span id="year"></span> Leo Klemet</div>
      <div class="muted">AI Engineer ¬∑ SWE ¬∑ Generative AI / 3D Artist & Creative Technologist</div>
      <div style="text-align:right">
        <a href="#home">Back to top ‚Üë</a>
      </div>
    </div>
  </footer>

  <!-- PROJECT DETAIL DIALOG (reusable) -->
  <dialog class="project-detail" id="detailDialog" aria-labelledby="detailTitle">
    <div class="detail-header">
  <h2 id="detailTitle" style="margin:0">Project</h2>
      <button class="btn" id="detailClose" aria-label="Close project details">‚úï Close</button>
    </div>
    <div class="detail-body">
      <div id="detailContent" class="detail-grid">
        <!-- Filled dynamically by JS (see PROJECT_DETAILS map) -->
      </div>
    </div>
  </dialog>

  <script src="main.js" defer></script>
  <script>/* hero video temporarily disabled pending assets */</script>

  <!-- Leo Assistant Widget: minimal, no-build chat relay -->
  <style>
  #leo-assistant{position:fixed;right:16px;bottom:16px;z-index:9999}
  #leo-assistant .btn{border:1px solid #2a3357;padding:.55rem .8rem;border-radius:14px;background:#121a2e;color:#e8ecf8;cursor:pointer}
  #leo-assistant .panel{width:min(92vw,380px);height:420px;background:#0b1223;border:1px solid #2a3357;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.4);display:none;flex-direction:column;overflow:hidden}
  #leo-assistant .head{display:flex;justify-content:space-between;align-items:center;padding:.6rem 1rem;border-bottom:1px solid #1c2545}
  #leo-assistant .log{flex:1;overflow:auto;padding:0 1rem}
  #leo-assistant .msg{margin:.75rem 0}
  #leo-assistant .you{color:#c9d4ff}
  #leo-assistant .ai{color:#a7ffdc}
  #leo-assistant form{display:flex;gap:.5rem;padding:.6rem;border-top:1px solid #1c2545}
  #leo-assistant input{flex:1;background:#0f1830;color:#e8ecf8;border:1px solid #263055;border-radius:12px;padding:.65rem}
  #leo-assistant .msg.ai{white-space:pre-wrap}
  #leo-assistant .msg.ai::after{content:"‚ñç";animation:blink 1s steps(1) infinite;margin-left:2px;opacity:.6}
  #leo-assistant .msg.ai.done::after{content:"";animation:none}
  @keyframes blink{50%{opacity:0}}
  </style>

  <div id="leo-assistant">
    <button id="la-open" class="btn">ü§ñ Ask about my projects</button>
    <div id="la-panel" class="panel" role="dialog" aria-label="Leo Assistant">
      <div class="head">
        <strong>Leo‚Äôs Assistant</strong>
        <button id="la-close" class="btn" aria-label="Close assistant">‚úï</button>
      </div>
      <div id="la-log" class="log" aria-live="polite"></div>
      <form id="la-form">
        <input id="la-input" placeholder="Ask: which project fits data engineering?" autocomplete="off"/>
        <button class="btn" type="submit">Send</button>
      </form>
    </div>
  </div>

  <script>
  (() => {
    const API_STREAM = "https://assistant.leo-portfolio.app/chat/stream"; // your tunnel URL
    // Only show on GitHub Pages to avoid local dev errors if relay is private
    const allowed = location.hostname === 'leok974.github.io';
    const root = document.getElementById('leo-assistant');
    if(!allowed && root){ root.style.display = 'none'; return; }

    const openBtn = document.getElementById('la-open');
    const panel = document.getElementById('la-panel');
    const closeBtn = document.getElementById('la-close');
    const form = document.getElementById('la-form');
    const input = document.getElementById('la-input');
    const log = document.getElementById('la-log');
    const msgs = [];

    function show(){ panel.style.display='flex'; openBtn.style.display='none'; input.focus(); }
    function hide(){ panel.style.display='none'; openBtn.style.display='inline-block'; }
    openBtn.onclick = show; closeBtn.onclick = hide;

    const context = {};
    async function loadContext(){
      try {
        const res = await fetch('projects.json', {cache:'no-store'});
        const data = await res.json();
        const take = data.projects?.slice(0,6).map(p=>`‚Ä¢ ${p.title}: ${p.description} [${(p.tags||[]).join(', ')}]`).join('\n');
        context.summary = `Projects:\n${take}`;
      } catch {}
    }
    loadContext();

    function append(role, text){
      const div = document.createElement('div');
      div.className = 'msg ' + (role === 'user' ? 'you':'ai');
      div.textContent = (role === 'user' ? 'You: ' : 'Assistant: ') + text;
      log.appendChild(div);
      log.scrollTop = log.scrollHeight;
    }

    async function streamChat(payload){
      const res = await fetch(API_STREAM, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      if(!res.ok || !res.body) throw new Error('stream failed');
      const reader = res.body.getReader();
      const decoder = new TextDecoder();
      let buffer = '';
      let answer = '';
      while(true){
        const { value, done } = await reader.read();
        if(done) break;
        buffer += decoder.decode(value, { stream: true });
        let sep;
        while((sep = buffer.indexOf('\n\n')) !== -1){
          const chunk = buffer.slice(0, sep);
          buffer = buffer.slice(sep + 2);
          const lines = chunk.split('\n').map(l=>l.trim()).filter(Boolean);
          for(const l of lines){
            if(!l.startsWith('data:')) continue;
            const data = l.slice(5).trim();
            if(data === '[DONE]'){
              log.lastChild.classList.add('done');
              msgs.push({ role:'assistant', content: answer });
              return;
            }
            try{
              const j = JSON.parse(data);
              const choice = (j.choices && j.choices[0]) || {};
              const delta = (choice.delta && choice.delta.content) || '';
              const finish = choice.finish_reason || null;
              if(delta){
                answer += delta;
                log.lastChild.textContent = 'Assistant: ' + answer;
                log.scrollTop = log.scrollHeight;
              }
              if(finish){
                log.lastChild.classList.add('done');
                msgs.push({ role:'assistant', content: answer });
                return;
              }
            }catch{
              // ignore non-JSON keepalives
            }
          }
        }
      }
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const content = input.value.trim();
      if(!content) return;
      input.value='';
      msgs.push({role:'user', content});
      append('user', content);
      append('assistant', 'Thinking‚Ä¶');
      try {
        await streamChat({ messages: msgs, context, stream: true });
      } catch(err){
        try {
          const res = await fetch(API_STREAM.replace('/stream',''), {
            method:'POST', headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ messages: msgs, context })
          });
          const data = await res.json();
          const text = data.assistant || '(no response)';
          log.lastChild.textContent = 'Assistant: ' + text;
          msgs.push({role:'assistant', content: text});
        } catch {
          log.lastChild.textContent = 'Assistant: (connection failed ‚Äî please try again later)';
        }
      }
    });
  })();
  </script>

  <!-- AI Avatar Widget (canvas + streaming + TTS) -->
  <style>
  #ai-avatar-wrap{position:fixed;right:16px;bottom:16px;z-index:9999;display:flex;gap:12px;align-items:flex-end}
  #ai-avatar-canvas{width:160px;height:160px;border-radius:18px;border:1px solid #2a3357;background:#0b1223;box-shadow:0 10px 24px rgba(0,0,0,.35)}
  #ai-say {border:1px solid #2a3357;background:#121a2e;color:#e8ecf8;border-radius:12px;padding:.6rem .9rem}
  #ai-text {max-width:min(56vw,520px);min-height:48px;background:#0b1223;border:1px solid #2a3357;border-radius:12px;padding:.6rem .8rem;color:#e8ecf8;white-space:pre-wrap}
  #ai-controls{display:flex;gap:.5rem}
  </style>

  <div id="ai-avatar-wrap">
    <canvas id="ai-avatar-canvas" width="320" height="320" aria-label="AI avatar"></canvas>
    <div>
      <div id="ai-text">Ask me about my projects‚Ä¶</div>
      <div id="ai-controls">
        <input id="ai-input" placeholder="Which project fits GKE ops?" />
        <button id="ai-say">Send</button>
      </div>
    </div>
  </div>

  <script>
  (() => {
    const API_STREAM = "https://assistant.leo-portfolio.app/chat/stream"; // <- your tunnel URL
    const canvas = document.getElementById('ai-avatar-canvas');
    const ctx = canvas.getContext('2d');
    const sayBtn = document.getElementById('ai-say');
    const input = document.getElementById('ai-input');
    const out = document.getElementById('ai-text');

    const msgs = [];
    const context = {};
    (async () => {
      try {
        const res = await fetch('projects.json', {cache:'no-store'});
        const data = await res.json();
        context.summary = (data.projects||[]).slice(0,6)
          .map(p=>`‚Ä¢ ${p.title}: ${p.description} [${(p.tags||[]).join(', ')}]`).join('\n');
      } catch {}
    })();

    // --- Canvas avatar (simple anime style) ---
    const state = {
      t: 0,
      blink: 0,
      nextBlink: performance.now() + 2000 + Math.random()*2000,
      mouth: 0,
      speaking: false,
      headBob: 0
    };

    function drawAvatar() {
      const { width:w, height:h } = canvas;
      ctx.clearRect(0,0,w,h);

      ctx.save();
      const bob = Math.sin(state.t*0.0013)*2;
      ctx.translate(0, bob);

      const g = ctx.createRadialGradient(w/2, h/2, 20, w/2, h/2, 150);
      g.addColorStop(0, '#1a2345'); g.addColorStop(1, 'transparent');
      ctx.fillStyle = g; ctx.beginPath(); ctx.arc(w/2,h/2,140,0,Math.PI*2); ctx.fill();

      ctx.fillStyle = '#f3f6ff';
      ctx.beginPath(); ctx.arc(w/2, h/2, 88, 0, Math.PI*2); ctx.fill();

      const eyeY = h/2 - 18, eyeDX = 34, eyeW = 28, eyeH = 12*(1 - (1-Math.pow(1-state.blink,2)));
      ctx.fillStyle = '#0d1530';
      ctx.beginPath(); roundedRect(w/2-eyeDX-eyeW/2, eyeY-eyeH/2, eyeW, eyeH, 6); ctx.fill();
      ctx.beginPath(); roundedRect(w/2+eyeDX-eyeW/2, eyeY-eyeH/2, eyeW, eyeH, 6); ctx.fill();

      ctx.globalAlpha = 0.12; ctx.fillStyle = '#ff7aa2';
      ctx.beginPath(); ctx.ellipse(w/2-48, h/2+8, 18,8,0,0,Math.PI*2); ctx.fill();
      ctx.beginPath(); ctx.ellipse(w/2+48, h/2+8, 18,8,0,0,Math.PI*2); ctx.fill();
      ctx.globalAlpha = 1;

      const mOpen = 6 + state.mouth*14;
      ctx.fillStyle = '#c02d5c';
      ctx.beginPath(); ctx.ellipse(w/2, h/2+32, 18, mOpen/2, 0, 0, Math.PI*2); ctx.fill();

      ctx.fillStyle = '#263061';
      ctx.beginPath(); ctx.arc(w/2, h/2-52, 62, Math.PI*1.05, Math.PI*2 - 0.05); ctx.fill();

      ctx.strokeStyle = 'rgba(10,15,30,.25)';
      ctx.lineWidth = 1; ctx.beginPath(); ctx.arc(w/2, h/2, 88, 0, Math.PI*2); ctx.stroke();

      ctx.restore();
    }
    function roundedRect(x,y,w,h,r){ctx.moveTo(x+r,y);ctx.arcTo(x+w,y,x+w,y+h,r);ctx.arcTo(x+w,y+h,x,y+h,r);ctx.arcTo(x,y+h,x,y,r);ctx.arcTo(x,y,x+w,y,r);ctx.closePath();}

    function tick(now){
      state.t = now;
      if (now > state.nextBlink){
        state.blink += 0.25;
        if (state.blink >= 1){ state.blink = 0; state.nextBlink = now + 1500 + Math.random()*2500; }
      }
      const target = state.speaking ? 0.8 : 0.0;
      state.mouth += (target - state.mouth) * 0.15;
      drawAvatar();
      requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);

    // --- TTS (SpeechSynthesis) ---
    function speak(text){
      if (!text) return;
      const u = new SpeechSynthesisUtterance(text);
      const vs = speechSynthesis.getVoices();
      const prefer = vs.find(v => /en-US|en_GB/.test(v.lang) && /female|Jenny|Aria|Natasha/i.test(v.name)) || vs[0];
      if (prefer) u.voice = prefer;
      u.rate = 1.0; u.pitch = 1.05; u.volume = 1.0;
      u.onstart = () => { state.speaking = true; };
      u.onend   = () => { state.speaking = false; };
      u.onboundary = () => { state.mouth = 1.0; };
      speechSynthesis.speak(u);
    }

    // --- Stream and chunk to TTS ---
    async function streamOpenAI(payload){
      const res = await fetch(API_STREAM, {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      if (!res.ok || !res.body) throw new Error('stream failed');
      const reader = res.body.getReader();
      const decoder = new TextDecoder();
      let buffer = '', answer = '', speakBuf = '';
      out.textContent = '';
      const flushSpeak = () => { const s = speakBuf.trim(); if (s) speak(s); speakBuf = ''; };
      while (true) {
        const { value, done } = await reader.read();
        if (done) break;
        buffer += decoder.decode(value, { stream: true });
        let idx;
        while ((idx = buffer.indexOf('\n\n')) !== -1) {
          const frame = buffer.slice(0, idx);
          buffer = buffer.slice(idx + 2);
          for (const line of frame.split('\n')) {
            const l = line.trim();
            if (!l.startsWith('data:')) continue;
            const data = l.slice(5).trim();
            if (data === '[DONE]') { flushSpeak(); msgs.push({role:'assistant', content: answer}); return; }
            try {
              const j = JSON.parse(data);
              const d = j.choices?.[0]?.delta?.content || '';
              if (d) {
                answer += d;
                out.textContent = answer;
                speakBuf += d;
                if (/[\.\!\?]\s/.test(speakBuf)) {
                  const parts = speakBuf.split(/([\.\!\?]\s)/);
                  while (parts.length > 2) {
                    const seg = (parts.shift() || '') + (parts.shift() || '');
                    speak(seg);
                  }
                  speakBuf = parts.join('');
                }
              }
            } catch {}
          }
        }
      }
    }

    async function send(){
      const text = (input.value || '').trim();
      if (!text) return;
      input.value = '';
      msgs.push({ role:'user', content:text });
      out.textContent = '‚Ä¶';
      try {
        await streamOpenAI({ messages: msgs, context, stream: true });
      } catch (e){
        out.textContent = 'Connection failed. Please try again later.';
      }
    }
    sayBtn.addEventListener('click', send);
    input.addEventListener('keydown', (e)=>{ if (e.key==='Enter' && !e.shiftKey) { e.preventDefault(); send(); }});
  })();
  </script>
</body>
</html>
