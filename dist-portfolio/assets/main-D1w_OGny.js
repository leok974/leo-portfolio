var et=Object.defineProperty;var tt=(t,e,n)=>e in t?et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var j=(t,e,n)=>tt(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const nt="layout:update",Oe={recipe:null};async function V(){try{const t=await fetch("/api/layout",{credentials:"include"});if(!t.ok)return;const e=await t.json();Oe.recipe=e,rt(e),window.dispatchEvent(new CustomEvent(nt,{detail:e}))}catch{console.debug("[Layout] Backend unavailable, using defaults")}}function ot(){return Oe.recipe}function rt(t){Object.entries(t.cards).forEach(([e,n])=>{const o=document.querySelector(`[data-card="${e}"]`);if(!o){console.debug(`Card not found: ${e}`);return}n.order!==void 0&&(o.style.order=String(n.order)),n.size?o.setAttribute("data-size",n.size):o.removeAttribute("data-size"),n.hidden?o.setAttribute("hidden",""):o.removeAttribute("hidden")})}const He="admin:enabled";function st(){const t=new URL(location.href);if(t.searchParams.has("admin")){const e=t.searchParams.get("admin"),n=e===""||e==="1"||(e==null?void 0:e.toLowerCase())==="true";localStorage.setItem(He,n?"1":"0"),n&&history.replaceState(null,"",t.pathname+t.hash)}}function it(){return!1&&localStorage.getItem(He)==="1"}async function at(){try{const t=await fetch("/api/auth/me",{credentials:"include"});return t.ok?await t.json():null}catch{return null}}function lt(t){var n,o;const e=((n=t==null?void 0:t.user)==null?void 0:n.roles)||[];return((o=t==null?void 0:t.user)==null?void 0:o.is_admin)===!0||e.includes("admin")||e.includes("owner")}let W=null;async function he(){if(it())return!0;const t=Date.now();if(W&&t-W.at<1e4)return W.val;const e=await at(),n=lt(e);return W={at:t,val:n},n}async function ct(t){try{const e=await fetch("/api/admin/projects/hide",{method:"POST",headers:{"Content-Type":"application/json","x-admin-key":"7c9c56ddfd4ebc3058f0e3c31be642af4a8a7a375e120f82da0be9c26539b42e"},body:JSON.stringify({slug:t})});if(!e.ok){const o=await e.text();throw new Error(`Hide failed: ${o}`)}const n=await e.json();return console.log(`[Hide] Project '${t}' hidden`,n),!0}catch(e){return console.error(`[Hide] Failed to hide project '${t}':`,e),!1}}async function dt(t){try{const e=await fetch("/api/admin/projects/unhide",{method:"POST",headers:{"Content-Type":"application/json","x-admin-key":"7c9c56ddfd4ebc3058f0e3c31be642af4a8a7a375e120f82da0be9c26539b42e"},body:JSON.stringify({slug:t})});if(!e.ok){const o=await e.text();throw new Error(`Unhide failed: ${o}`)}const n=await e.json();return console.log(`[Unhide] Project '${t}' unhidden`,n),!0}catch(e){return console.error(`[Unhide] Failed to unhide project '${t}':`,e),!1}}async function ut(){try{const t="https://api.leoklemet.com/agent/refresh",e="SZdbVu7AlUZJ5Ce6d5hsO393tyuTwz5COc3VdxN0jZU=",n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","x-agent-key":e},body:JSON.stringify({reason:"refresh-portfolio",ref:"main"})});if(!n.ok)throw new Error(`Refresh dispatch failed: ${n.status}`);return console.log("[Refresh] Portfolio refresh triggered"),!0}catch(t){return console.error("[Refresh] Failed to trigger portfolio refresh:",t),!1}}async function _t(){try{const t=await fetch("/projects.hidden.json");return t.ok?await t.json():[]}catch(t){return console.error("[Hidden] Failed to load hidden projects:",t),[]}}class ft{constructor(e){j(this,"panel",null);j(this,"isOpen",!1);j(this,"hiddenProjects",new Set);j(this,"status");this.status=e,this.loadHiddenProjects()}async loadHiddenProjects(){const e=await _t();this.hiddenProjects=new Set(e.map(n=>n.toLowerCase()))}mount(){const e=document.createElement("button");e.id="dev-admin-toggle",e.textContent="‚öôÔ∏è",e.style.cssText=`
      position: fixed;
      right: 60px;
      bottom: 12px;
      padding: 8px 12px;
      border-radius: 6px;
      background: #1e293b;
      color: #fff;
      font-size: 16px;
      border: 1px solid #334155;
      cursor: pointer;
      z-index: 99998;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      transition: all 0.2s;
    `,e.addEventListener("mouseenter",()=>{e.style.transform="scale(1.1)",e.style.background="#334155"}),e.addEventListener("mouseleave",()=>{e.style.transform="scale(1)",e.style.background="#1e293b"}),e.addEventListener("click",()=>this.toggle()),document.body.appendChild(e),this.createPanel()}createPanel(){this.panel=document.createElement("div"),this.panel.id="dev-admin-panel",this.panel.style.cssText=`
      position: fixed;
      right: 12px;
      bottom: 60px;
      width: 400px;
      max-height: 600px;
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.5);
      z-index: 99997;
      display: none;
      flex-direction: column;
      overflow: hidden;
    `,this.panel.innerHTML=`
      <div style="padding: 16px; border-bottom: 1px solid #334155;">
        <h3 style="margin: 0; color: #fff; font-size: 16px; font-weight: 600;">
          Project Admin
        </h3>
      </div>
      <div id="project-admin-list" style="
        flex: 1;
        overflow-y: auto;
        padding: 12px;
      ">
        <div style="color: #94a3b8; text-align: center; padding: 20px;">
          Loading projects...
        </div>
      </div>
    `,document.body.appendChild(this.panel),this.loadProjects()}async loadProjects(){try{const n=await(await fetch("/projects.json")).json(),o=Object.values(n);await this.loadHiddenProjects(),this.renderProjects(o)}catch(e){console.error("[Dev Admin] Failed to load projects:",e);const n=document.getElementById("project-admin-list");n&&(n.innerHTML=`
          <div style="color: #ef4444; text-align: center; padding: 20px;">
            Failed to load projects
          </div>
        `)}}renderProjects(e){const n=document.getElementById("project-admin-list");if(!n)return;if(!this.status.allowed){n.innerHTML=`
        <div style="color: #94a3b8; text-align: center; padding: 20px;">
          <div style="margin-bottom: 12px;">üîí Dev Overlay: ${this.status.mode}</div>
          <div style="font-size: 12px; line-height: 1.5;">
            ${this.status.mode==="no-backend"?"Backend is disabled. Set <code>VITE_BACKEND_ENABLED=1</code> to enable admin features.":this.status.mode==="unreachable"?"Backend is unreachable. Check if the API server is running.":this.status.mode==="denied"?"Access denied. Check <code>DEV_OVERLAY_KEY</code> configuration.":"Use <code>?dev_overlay=dev</code> to unlock locally."}
          </div>
        </div>
      `;return}n.innerHTML=e.sort((s,r)=>s.title.localeCompare(r.title)).map(s=>{const r=this.hiddenProjects.has(s.slug.toLowerCase());return`
          <div style="
            padding: 12px;
            margin-bottom: 8px;
            background: ${r?"#1e293b":"#1e40af15"};
            border: 1px solid ${r?"#475569":"#3b82f6"};
            border-radius: 6px;
          ">
            <div style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              gap: 8px;
            ">
              <div style="flex: 1; min-width: 0;">
                <div style="
                  color: ${r?"#94a3b8":"#e2e8f0"};
                  font-weight: 500;
                  font-size: 14px;
                  text-decoration: ${r?"line-through":"none"};
                  overflow: hidden;
                  text-overflow: ellipsis;
                  white-space: nowrap;
                ">
                  ${this.escapeHtml(s.title)}
                </div>
                <div style="
                  color: #64748b;
                  font-size: 12px;
                  margin-top: 2px;
                ">
                  ${s.slug}
                </div>
              </div>
              <div style="display: flex; gap: 4px;">
                <button
                  class="project-toggle-btn"
                  data-slug="${s.slug}"
                  data-action="${r?"unhide":"hide"}"
                  style="
                    padding: 6px 12px;
                    border-radius: 4px;
                    border: none;
                    background: ${r?"#10b981":"#ef4444"};
                    color: white;
                    font-size: 12px;
                    font-weight: 600;
                    cursor: pointer;
                    white-space: nowrap;
                    transition: opacity 0.2s;
                  "
                  onmouseover="this.style.opacity='0.8'"
                  onmouseout="this.style.opacity='1'"
                >
                  ${r?"üëÅÔ∏è Show":"üö´ Hide"}
                </button>
              </div>
            </div>
          </div>
        `}).join(""),n.querySelectorAll(".project-toggle-btn").forEach(s=>{s.addEventListener("click",r=>this.handleToggle(r))})}async handleToggle(e){const n=e.target,o=n.dataset.slug,s=n.dataset.action;if(!(!o||!s)){n.disabled=!0,n.textContent="‚è≥";try{let r=!1;if(s==="hide"?r=await ct(o):r=await dt(o),r){const a=await ut();alert(a?`Project "${o}" ${s==="hide"?"hidden":"shown"}!

Portfolio refresh triggered. Changes will be live in ~2 minutes.`:`Project "${o}" ${s==="hide"?"hidden":"shown"}!

Note: Auto-refresh failed. You may need to manually rebuild.`),await this.loadProjects()}else alert(`Failed to ${s} project "${o}". Check console for details.`),n.disabled=!1,n.textContent=s==="hide"?"üö´ Hide":"üëÅÔ∏è Show"}catch(r){console.error("[Dev Admin] Toggle error:",r),alert(`Error: ${r}`),n.disabled=!1,n.textContent=s==="hide"?"üö´ Hide":"üëÅÔ∏è Show"}}}toggle(){this.panel&&(this.isOpen=!this.isOpen,this.panel.style.display=this.isOpen?"flex":"none")}escapeHtml(e){const n=document.createElement("div");return n.textContent=e,n.innerHTML}}function pt(t){new ft(t).mount(),console.log("[Dev Overlay] Project admin panel mounted with status:",t)}let H=null;async function me(){if(new URL(location.href).searchParams.get("dev_overlay")==="dev"&&localStorage.setItem("dev:unlock","1"),localStorage.getItem("dev:unlock")==="1")return H={allowed:!0,mode:"local"},H;try{const n=await fetch("/api/dev/status",{headers:{"x-dev-key":"a61350cef0487532f2814a54499f3baeb8f207ead09bbc0e24472911ce6e0cc9"}});if(!n.ok)return H={allowed:!1,mode:"unreachable"},H;const o=await n.json();return H={allowed:o.allowed??!1,mode:o.mode??"denied"},H}catch(e){return console.debug("[Dev Overlay] Backend unreachable:",e),H={allowed:!1,mode:"unreachable"},H}}function De(){return document.cookie.split(";").map(e=>e.trim()).some(e=>e.startsWith("sa_dev="))}async function ht(){if(!De()){console.log("[Dev Overlay] Not enabled (no sa_dev cookie found)");return}console.log("[Dev Overlay] Enabled - mounting badge");const t=me(),e=document.createElement("div");e.dataset.testid="dev-overlay",e.textContent="DEV",e.style.cssText=`
    position: fixed;
    right: 12px;
    bottom: 12px;
    padding: 6px 8px;
    border-radius: 6px;
    background: #111;
    color: #fff;
    font: 600 12px/1 system-ui;
    z-index: 99999;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: transform 0.2s;
  `,e.addEventListener("mouseenter",()=>{e.style.transform="scale(1.1)"}),e.addEventListener("mouseleave",()=>{e.style.transform="scale(1)"}),e.addEventListener("click",async()=>{try{const o=await me();console.info("[Dev Overlay] Status:",o),mt(`Dev Overlay: ${o.mode} (${o.allowed?"allowed":"denied"})`)}catch(o){console.error("[Dev Overlay] Failed to fetch status:",o)}}),document.body.appendChild(e),console.log("[Dev Overlay] Badge mounted successfully");const n=await t;console.info("[Dev Overlay] Status loaded:",n),pt(n)}function mt(t){const e=document.createElement("div");e.textContent=t,e.style.cssText=`
    position: fixed;
    bottom: 80px;
    right: 12px;
    padding: 12px 16px;
    background: #1e293b;
    color: #fff;
    border-radius: 6px;
    font: 500 14px/1.4 system-ui;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 99999;
    max-width: 300px;
    animation: slideIn 0.3s ease-out;
  `,document.body.appendChild(e),setTimeout(()=>{e.style.animation="slideOut 0.3s ease-out",setTimeout(()=>e.remove(),300)},3e3)}async function yt(t="dev"){try{const e=await fetch("/agent/dev/enable",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)return console.error("[Dev Overlay] Enable failed:",e.status),!1;const n=await e.json();return console.log("[Dev Overlay] Enabled:",n),window.location.reload(),!0}catch(e){return console.error("[Dev Overlay] Enable error:",e),!1}}if(typeof window<"u"){const e=new URLSearchParams(window.location.search).get("dev_overlay");e&&!De()&&(console.log("[Dev Overlay] Auto-enabling from URL parameter"),yt(e))}class gt{constructor(){j(this,"projects",[]);j(this,"currentFilter","all");j(this,"gridContainer");j(this,"loadingElement",null);j(this,"emptyElement");j(this,"observer");if(this.gridContainer=document.getElementById("portfolio-grid"),this.emptyElement=document.getElementById("portfolio-empty"),!this.gridContainer||!this.emptyElement){console.warn("Portfolio elements not found");return}this.loadingElement=this.gridContainer.querySelector(".portfolio-loading"),this.observer=new IntersectionObserver(e=>{e.forEach(n=>{if(n.isIntersecting){const o=n.target,s=o.dataset.src;s&&(o.src=s,o.removeAttribute("data-src"),this.observer.unobserve(o))}})},{rootMargin:"50px"}),this.setupFilterListeners(),this.loadProjects()}setupFilterListeners(){const e=document.querySelectorAll(".filter-btn");e.forEach(n=>{n.addEventListener("click",o=>{const s=o.currentTarget,r=s.dataset.filter||"all";e.forEach(a=>a.classList.remove("active")),s.classList.add("active"),this.currentFilter=r,this.renderProjects()})})}async loadProjects(){try{const[e,n]=await Promise.all([fetch("/projects.json"),fetch("/projects.hidden.json").catch(()=>({ok:!1,json:async()=>[]}))]);if(!e.ok)throw new Error(`Failed to fetch projects: ${e.status}`);const o=await e.json(),s=n.ok?await n.json():[],r=new Set((s??[]).map(l=>l.toLowerCase())),a=Object.values(o);this.projects=a.filter(l=>!r.has((l.slug??"").toLowerCase())),console.log(`Loaded ${this.projects.length} projects (${a.length-this.projects.length} hidden)`),this.renderProjects()}catch(e){console.error("Error loading projects:",e),this.showEmpty()}}renderProjects(){if(!this.gridContainer)return;this.gridContainer.innerHTML="";const e=this.currentFilter==="all"?this.projects:this.projects.filter(o=>o.tags.some(s=>s.toLowerCase().includes(this.currentFilter.toLowerCase())));if(console.log(`Rendering ${e.length} projects (filter: ${this.currentFilter})`),e.length===0){this.showEmpty();return}this.emptyElement&&(this.emptyElement.style.display="none"),e.forEach((o,s)=>{const r=this.createProjectCard(o,s);this.gridContainer.appendChild(r)}),this.gridContainer.querySelectorAll("img[data-src]").forEach(o=>this.observer.observe(o))}createProjectCard(e,n){const o=document.createElement("div");o.className="project-card",o.style.animationDelay=`${n*.05}s`,o.setAttribute("data-card",e.slug),o.setAttribute("data-testid","project-card");const s=e.thumbnail||"/placeholder.svg",r=this.escapeHtml(e.title),a=this.escapeHtml(e.description||e.problem||"No description available."),l=e.tags.slice(0,4).map(c=>`<span class="project-tag">${this.escapeHtml(c)}</span>`).join("");let d="";return e.demo&&(d=`
        <a href="${e.demo}" target="_blank" rel="noopener noreferrer" class="project-link">
          View Project ‚Üí
        </a>
      `),o.innerHTML=`
      <div class="project-thumbnail">
        <img data-src="${s}" alt="${r}" loading="lazy" />
      </div>
      <div class="project-content">
        <h3 class="project-title">${r}</h3>
        ${l?`<div class="project-tags">${l}</div>`:""}
        <p class="project-description">${a}</p>
        ${d}
      </div>
    `,o}showEmpty(){!this.gridContainer||!this.emptyElement||(this.gridContainer.innerHTML="",this.emptyElement.style.display="block")}escapeHtml(e){const n=document.createElement("div");return n.textContent=e,n.innerHTML}}document.addEventListener("DOMContentLoaded",()=>{console.log("Portfolio UI initialized"),new gt});st();V();const re="https://calendly.com/leoklemet-pa";function vt(){if(window.__CALENDLY_STARTED__)return;window.__CALENDLY_STARTED__=!0;const t=document.querySelector(".calendly-inline-widget");t&&t.setAttribute("data-url",re),typeof window.Calendly<"u"&&window.Calendly.initInlineWidget({url:re,parentElement:document.querySelector(".calendly-inline-widget"),prefill:{},utm:{}})}document.addEventListener("DOMContentLoaded",()=>{vt();const t=document.getElementById("calendly-popup-btn");t&&t.addEventListener("click",n=>(n.preventDefault(),typeof window.Calendly<"u"&&window.Calendly.initPopupWidget({url:re}),!1));const e=n=>{const o=document.getElementById(n);o&&o.addEventListener("click",async()=>{try{const s=await fetch("/resume/copy.txt?limit=2600",{credentials:"include"});if(!s.ok)throw new Error(`Failed to fetch resume: ${s.status}`);const r=await s.text();await navigator.clipboard.writeText(r);const a=o.innerHTML,l=o.querySelector(".contact-icon");if(l){l.textContent="‚úÖ";const d=o.querySelector("span:not(.contact-icon)");d&&(d.textContent="Copied!")}else o.innerHTML="‚úÖ Copied!";setTimeout(()=>{o.innerHTML=a},2e3)}catch(s){console.error("Failed to copy resume:",s);const r=o.querySelector(".contact-icon");r?r.textContent="‚ùå":o.innerHTML="‚ùå Failed",setTimeout(()=>{r?r.textContent="üìã":o.innerHTML="üìã Copy for LinkedIn"},2e3)}})};e("copy-linkedin-btn"),e("copy-linkedin-btn-footer")});window.addEventListener("layout:update",t=>{console.log("Layout loaded:",t.detail)});ht();console.log("Portfolio shell initialized");window.__APP_READY__=!0;var ee,b,Ne,I,ye,Ie,Fe,Me,de,se,ie,R={},Ue=[],bt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,te=Array.isArray;function $(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function wt(t,e,n){var o,s,r,a={};for(r in e)r=="key"?o=e[r]:r=="ref"?s=e[r]:a[r]=e[r];if(arguments.length>2&&(a.children=arguments.length>3?ee.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)a[r]===void 0&&(a[r]=t.defaultProps[r]);return Y(t,a,o,s,null)}function Y(t,e,n,o,s){var r={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Ne,__i:-1,__u:0};return s==null&&b.vnode!=null&&b.vnode(r),r}function q(t){return t.children}function J(t,e){this.props=t,this.context=e}function B(t,e){if(e==null)return t.__?B(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?B(t):null}function Be(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Be(t)}}function ge(t){(!t.__d&&(t.__d=!0)&&I.push(t)&&!Q.__r++||ye!=b.debounceRendering)&&((ye=b.debounceRendering)||Ie)(Q)}function Q(){for(var t,e,n,o,s,r,a,l=1;I.length;)I.length>l&&I.sort(Fe),t=I.shift(),l=I.length,t.__d&&(n=void 0,o=void 0,s=(o=(e=t).__v).__e,r=[],a=[],e.__P&&((n=$({},o)).__v=o.__v+1,b.vnode&&b.vnode(n),_e(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[s]:null,r,s??B(o),!!(32&o.__u),a),n.__v=o.__v,n.__.__k[n.__i]=n,qe(r,n,a),o.__e=o.__=null,n.__e!=s&&Be(n)));Q.__r=0}function Re(t,e,n,o,s,r,a,l,d,c,p){var i,_,u,w,C,x,g,y=o&&o.__k||Ue,f=e.length;for(d=xt(n,e,y,d,f),i=0;i<f;i++)(u=n.__k[i])!=null&&(_=u.__i==-1?R:y[u.__i]||R,u.__i=i,x=_e(t,u,_,s,r,a,l,d,c,p),w=u.__e,u.ref&&_.ref!=u.ref&&(_.ref&&fe(_.ref,null,u),p.push(u.ref,u.__c||w,u)),C==null&&w!=null&&(C=w),(g=!!(4&u.__u))||_.__k===u.__k?d=ze(u,d,t,g):typeof u.type=="function"&&x!==void 0?d=x:w&&(d=w.nextSibling),u.__u&=-7);return n.__e=C,d}function xt(t,e,n,o,s){var r,a,l,d,c,p=n.length,i=p,_=0;for(t.__k=new Array(s),r=0;r<s;r++)(a=e[r])!=null&&typeof a!="boolean"&&typeof a!="function"?(d=r+_,(a=t.__k[r]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Y(null,a,null,null,null):te(a)?Y(q,{children:a},null,null,null):a.constructor==null&&a.__b>0?Y(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,l=null,(c=a.__i=kt(a,n,d,i))!=-1&&(i--,(l=n[c])&&(l.__u|=2)),l==null||l.__v==null?(c==-1&&(s>p?_--:s<p&&_++),typeof a.type!="function"&&(a.__u|=4)):c!=d&&(c==d-1?_--:c==d+1?_++:(c>d?_--:_++,a.__u|=4))):t.__k[r]=null;if(i)for(r=0;r<p;r++)(l=n[r])!=null&&!(2&l.__u)&&(l.__e==o&&(o=B(l)),Ke(l,l));return o}function ze(t,e,n,o){var s,r;if(typeof t.type=="function"){for(s=t.__k,r=0;s&&r<s.length;r++)s[r]&&(s[r].__=t,e=ze(s[r],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=B(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function kt(t,e,n,o){var s,r,a,l=t.key,d=t.type,c=e[n],p=c!=null&&(2&c.__u)==0;if(c===null&&t.key==null||p&&l==c.key&&d==c.type)return n;if(o>(p?1:0)){for(s=n-1,r=n+1;s>=0||r<e.length;)if((c=e[a=s>=0?s--:r++])!=null&&!(2&c.__u)&&l==c.key&&d==c.type)return a}return-1}function ve(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||bt.test(e)?n:n+"px"}function K(t,e,n,o,s){var r,a;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||ve(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||ve(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(Me,"$1")),a=e.toLowerCase(),e=a in t||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o?n.u=o.u:(n.u=de,t.addEventListener(e,r?ie:se,r)):t.removeEventListener(e,r?ie:se,r);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function be(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=de++;else if(e.t<n.u)return;return n(b.event?b.event(e):e)}}}function _e(t,e,n,o,s,r,a,l,d,c){var p,i,_,u,w,C,x,g,y,f,v,S,T,F,D,A,M,P=e.type;if(e.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),r=[l=e.__e=n.__e]),(p=b.__b)&&p(e);e:if(typeof P=="function")try{if(g=e.props,y="prototype"in P&&P.prototype.render,f=(p=P.contextType)&&o[p.__c],v=p?f?f.props.value:p.__:o,n.__c?x=(i=e.__c=n.__c).__=i.__E:(y?e.__c=i=new P(g,v):(e.__c=i=new J(g,v),i.constructor=P,i.render=Ct),f&&f.sub(i),i.props=g,i.state||(i.state={}),i.context=v,i.__n=o,_=i.__d=!0,i.__h=[],i._sb=[]),y&&i.__s==null&&(i.__s=i.state),y&&P.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=$({},i.__s)),$(i.__s,P.getDerivedStateFromProps(g,i.__s))),u=i.props,w=i.state,i.__v=e,_)y&&P.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),y&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(y&&P.getDerivedStateFromProps==null&&g!==u&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(g,v),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(g,i.__s,v)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(i.props=g,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(h){h&&(h.__=e)}),S=0;S<i._sb.length;S++)i.__h.push(i._sb[S]);i._sb=[],i.__h.length&&a.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(g,i.__s,v),y&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(u,w,C)})}if(i.context=v,i.props=g,i.__P=t,i.__e=!1,T=b.__r,F=0,y){for(i.state=i.__s,i.__d=!1,T&&T(e),p=i.render(i.props,i.state,i.context),D=0;D<i._sb.length;D++)i.__h.push(i._sb[D]);i._sb=[]}else do i.__d=!1,T&&T(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++F<25);i.state=i.__s,i.getChildContext!=null&&(o=$($({},o),i.getChildContext())),y&&!_&&i.getSnapshotBeforeUpdate!=null&&(C=i.getSnapshotBeforeUpdate(u,w)),A=p,p!=null&&p.type===q&&p.key==null&&(A=We(p.props.children)),l=Re(t,te(A)?A:[A],e,n,o,s,r,a,l,d,c),i.base=e.__e,e.__u&=-161,i.__h.length&&a.push(i),x&&(i.__E=i.__=null)}catch(h){if(e.__v=null,d||r!=null)if(h.then){for(e.__u|=d?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;r[r.indexOf(l)]=null,e.__e=l}else{for(M=r.length;M--;)ue(r[M]);ae(e)}else e.__e=n.__e,e.__k=n.__k,h.then||ae(e);b.__e(h,e,n)}else r==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=Et(n.__e,e,n,o,s,r,a,d,c);return(p=b.diffed)&&p(e),128&e.__u?void 0:l}function ae(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ae)}function qe(t,e,n){for(var o=0;o<n.length;o++)fe(n[o],n[++o],n[++o]);b.__c&&b.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(r){r.call(s)})}catch(r){b.__e(r,s.__v)}})}function We(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:te(t)?t.map(We):$({},t)}function Et(t,e,n,o,s,r,a,l,d){var c,p,i,_,u,w,C,x=n.props,g=e.props,y=e.type;if(y=="svg"?s="http://www.w3.org/2000/svg":y=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((u=r[c])&&"setAttribute"in u==!!y&&(y?u.localName==y:u.nodeType==3)){t=u,r[c]=null;break}}if(t==null){if(y==null)return document.createTextNode(g);t=document.createElementNS(s,y,g.is&&g),l&&(b.__m&&b.__m(e,r),l=!1),r=null}if(y==null)x===g||l&&t.data==g||(t.data=g);else{if(r=r&&ee.call(t.childNodes),x=n.props||R,!l&&r!=null)for(x={},c=0;c<t.attributes.length;c++)x[(u=t.attributes[c]).name]=u.value;for(c in x)if(u=x[c],c!="children"){if(c=="dangerouslySetInnerHTML")i=u;else if(!(c in g)){if(c=="value"&&"defaultValue"in g||c=="checked"&&"defaultChecked"in g)continue;K(t,c,null,u,s)}}for(c in g)u=g[c],c=="children"?_=u:c=="dangerouslySetInnerHTML"?p=u:c=="value"?w=u:c=="checked"?C=u:l&&typeof u!="function"||x[c]===u||K(t,c,u,x[c],s);if(p)l||i&&(p.__html==i.__html||p.__html==t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),Re(e.type=="template"?t.content:t,te(_)?_:[_],e,n,o,y=="foreignObject"?"http://www.w3.org/1999/xhtml":s,r,a,r?r[0]:n.__k&&B(n,0),l,d),r!=null)for(c=r.length;c--;)ue(r[c]);l||(c="value",y=="progress"&&w==null?t.removeAttribute("value"):w!=null&&(w!==t[c]||y=="progress"&&!w||y=="option"&&w!=x[c])&&K(t,c,w,x[c],s),c="checked",C!=null&&C!=t[c]&&K(t,c,C,x[c],s))}return t}function fe(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(s){b.__e(s,n)}}function Ke(t,e,n){var o,s;if(b.unmount&&b.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||fe(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){b.__e(r,e)}o.base=o.__P=null}if(o=t.__k)for(s=0;s<o.length;s++)o[s]&&Ke(o[s],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=void 0}function Ct(t,e,n){return this.constructor(t,n)}function Ve(t,e,n){var o,s,r,a;e==document&&(e=document.documentElement),b.__&&b.__(t,e),s=(o=!1)?null:e.__k,r=[],a=[],_e(e,t=e.__k=wt(q,null,[t]),s||R,R,e.namespaceURI,s?null:e.firstChild?ee.call(e.childNodes):null,r,s?s.__e:e.firstChild,o,a),qe(r,t,a)}ee=Ue.slice,b={__e:function(t,e,n,o){for(var s,r,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(t)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,o||{}),a=s.__d),a)return s.__E=s}catch(l){t=l}throw t}},Ne=0,J.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=$({},this.state),typeof t=="function"&&(t=t($({},n),this.props)),t&&$(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ge(this))},J.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ge(this))},J.prototype.render=q,I=[],Ie=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fe=function(t,e){return t.__v.__b-e.__v.__b},Q.__r=0,Me=/(PointerCapture)$|Capture$/i,de=0,se=be(!1),ie=be(!0);var Lt=0;function m(t,e,n,o,s,r){e||(e={});var a,l,d=e;if("ref"in d)for(l in d={},e)l=="ref"?a=e[l]:d[l]=e[l];var c={type:t,props:d,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Lt,__i:-1,__u:0,__source:s,__self:r};if(typeof t=="function"&&(a=t.defaultProps))for(l in a)d[l]===void 0&&(d[l]=a[l]);return b.vnode&&b.vnode(c),c}var z,k,ne,we,X=0,Ye=[],E=b,xe=E.__b,ke=E.__r,Ee=E.diffed,Ce=E.__c,Le=E.unmount,Pe=E.__;function pe(t,e){E.__h&&E.__h(k,t,X||e),X=0;var n=k.__H||(k.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function N(t){return X=1,Pt(Ge,t)}function Pt(t,e,n){var o=pe(z++,2);if(o.t=t,!o.__c&&(o.__=[Ge(void 0,e),function(l){var d=o.__N?o.__N[0]:o.__[0],c=o.t(d,l);d!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=k,!k.__f)){var s=function(l,d,c){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(_){return!!_.__c});if(p.every(function(_){return!_.__N}))return!r||r.call(this,l,d,c);var i=o.__c.props!==l;return p.forEach(function(_){if(_.__N){var u=_.__[0];_.__=_.__N,_.__N=void 0,u!==_.__[0]&&(i=!0)}}),r&&r.call(this,l,d,c)||i};k.__f=!0;var r=k.shouldComponentUpdate,a=k.componentWillUpdate;k.componentWillUpdate=function(l,d,c){if(this.__e){var p=r;r=void 0,s(l,d,c),r=p}a&&a.call(this,l,d,c)},k.shouldComponentUpdate=s}return o.__N||o.__}function Z(t,e){var n=pe(z++,3);!E.__s&&Ze(n.__H,e)&&(n.__=t,n.u=e,k.__H.__h.push(n))}function Je(t){return X=5,jt(function(){return{current:t}},[])}function jt(t,e){var n=pe(z++,7);return Ze(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function $t(){for(var t;t=Ye.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(G),t.__H.__h.forEach(le),t.__H.__h=[]}catch(e){t.__H.__h=[],E.__e(e,t.__v)}}E.__b=function(t){k=null,xe&&xe(t)},E.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Pe&&Pe(t,e)},E.__r=function(t){ke&&ke(t),z=0;var e=(k=t.__c).__H;e&&(ne===k?(e.__h=[],k.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(G),e.__h.forEach(le),e.__h=[],z=0)),ne=k},E.diffed=function(t){Ee&&Ee(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ye.push(e)!==1&&we===E.requestAnimationFrame||((we=E.requestAnimationFrame)||St)($t)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ne=k=null},E.__c=function(t,e){e.some(function(n){try{n.__h.forEach(G),n.__h=n.__h.filter(function(o){return!o.__||le(o)})}catch(o){e.some(function(s){s.__h&&(s.__h=[])}),e=[],E.__e(o,n.__v)}}),Ce&&Ce(t,e)},E.unmount=function(t){Le&&Le(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{G(o)}catch(s){e=s}}),n.__H=void 0,e&&E.__e(e,n.__v))};var je=typeof requestAnimationFrame=="function";function St(t){var e,n=function(){clearTimeout(o),je&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);je&&(e=requestAnimationFrame(n))}function G(t){var e=k,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),k=e}function le(t){var e=k;t.__c=t.__(),k=e}function Ze(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ge(t,e){return typeof e=="function"?e(t):e}function Tt(){const t=Je(null);return Z(()=>{const e="calendly-widget-js";if(!document.getElementById(e)){const o=document.createElement("script");o.id=e,o.src="https://assets.calendly.com/assets/external/widget.js",o.async=!0,document.body.appendChild(o)}const n=o=>{try{const s=o.data,r=typeof s=="string"?JSON.parse(s):s;r&&r.event==="calendly:frameHeight"&&Number(r.payload)&&t.current&&(t.current.style.height=r.payload+"px")}catch{}};return window.addEventListener("message",n),()=>window.removeEventListener("message",n)},[]),m("section",{id:"contact",class:"contact-section",children:[m("h2",{class:"section-title",children:"Contact"}),m("div",{class:"cal-wrap",children:m("div",{ref:t,id:"calendly",class:"calendly-inline-widget","data-url":"https://calendly.com/leoklemet-pa","data-testid":"calendly"})})]})}const $e=document.getElementById("contact-root");$e&&(Ve(m(Tt,{}),$e),console.log("Contact component initialized"));const Qe="chatDock:collapsed";function ce(t){const e=document.getElementById("chat-dock"),n=document.getElementById("dock-toggle"),o=document.getElementById("dock-tab");if(!e)return;e.classList.toggle("collapsed",t);const s=!t;e.setAttribute("aria-expanded",String(s)),n&&(n.setAttribute("aria-expanded",String(s)),n.setAttribute("title",t?"Expand (C)":"Collapse (C)")),o&&o.setAttribute("aria-expanded",String(s));try{localStorage.setItem(Qe,t?"1":"0")}catch(r){console.warn("Could not persist dock state:",r)}!t&&n&&n.focus()}function oe(){const t=document.getElementById("chat-dock");if(!t)return;const e=t.classList.contains("collapsed");ce(!e)}function At(){let t=!1;try{t=localStorage.getItem(Qe)==="1"}catch{}ce(t);const e=document.getElementById("dock-toggle");e&&e.addEventListener("click",oe);const n=document.getElementById("dock-tab");n&&n.addEventListener("click",oe),window.addEventListener("keydown",o=>{const s=o.target,r=s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable;o.key.toLowerCase()==="c"&&!o.altKey&&!o.ctrlKey&&!o.metaKey&&!r&&(o.preventDefault(),oe()),o.key==="Escape"&&!r&&ce(!0)})}function Ot(t){return t.currentTarget.value}function Ht(){const e=new URL(window.location.href).searchParams.get("layout");return e==="1"?!0:e!=="0"}const Se="layout:update",Xe="";function L(){return Date.now()}function Te(t){return new Date(t).toLocaleTimeString()}async function Dt(t){var o,s,r;const e=await fetch(`${Xe}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:t}),credentials:"include"});if(!e.ok)throw new Error(`chat failed: ${e.status}`);const n=await e.json();return n.content||((r=(s=(o=n.choices)==null?void 0:o[0])==null?void 0:s.message)==null?void 0:r.content)||"No response"}async function Nt(t,{onDelta:e,onDone:n,onError:o}){var d,c,p,i;const s=await fetch(`${Xe}/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:t}),credentials:"include"});if(!s.ok||!s.body){o(new Error(`stream failed: ${s.status}`));return}const r=s.body.getReader(),a=new TextDecoder;let l="";try{for(;;){const{value:_,done:u}=await r.read();if(u)break;l+=a.decode(_,{stream:!0});let w;for(;(w=l.indexOf(`

`))>=0;){const C=l.slice(0,w);l=l.slice(w+2);const x=C.split(`
`).find(y=>y.startsWith("data:"));if(!x)continue;const g=x.slice(5).trim();if(g==="[DONE]"){n();return}try{const y=JSON.parse(g),f=((d=y.delta)==null?void 0:d.content)||((i=(p=(c=y.choices)==null?void 0:c[0])==null?void 0:p.delta)==null?void 0:i.content)||"";if(f&&e(f),y.done){n();return}}catch{e(g)}}}n()}catch(_){o(_)}}function It(){const[t,e]=N(ot()),[n,o]=N([{role:"system",text:"Assistant ready. Type below and press Enter.",ts:L()}]),[s,r]=N(""),[a,l]=N(!1),[d,c]=N(!1),[p,i]=N(!0),[_,u]=N(!1),w=Je(null);Z(()=>{(async()=>c(await he()))();const f=async()=>c(await he());return window.addEventListener("focus",f),()=>window.removeEventListener("focus",f)},[]),Z(()=>{const f=v=>e(v.detail);return window.addEventListener(Se,f),()=>window.removeEventListener(Se,f)},[]),Z(()=>{const f=w.current;f&&(f.scrollTop=f.scrollHeight)},[n]);async function C(f){var D,A,M,P;const v=f.trim();if(!v)return;if(_){o(h=>[...h,{role:"event",text:"[error] Assistant API is offline. Please try again later.",ts:L()}]);return}o(h=>[...h,{role:"user",text:v,ts:L()}]),r(""),l(!0);const S=n.filter(h=>h.role==="user"||h.role==="assistant").slice(-5).map(h=>({role:h.role,content:h.text}));S.push({role:"user",content:v});let T=!1,F="";try{await Nt(S,{onDelta:h=>{T=!0,F+=h,o(O=>{const U=O[O.length-1];return U&&U.role==="assistant"&&U.ts>L()-5e3?[...O.slice(0,-1),{...U,text:F}]:[...O,{role:"assistant",text:F,ts:L()}]})},onDone:()=>{l(!1),u(!1)},onError:h=>{console.error("[chat] stream error:",h)}})}catch(h){console.warn("[chat] streaming failed, trying non-stream:",h)}if(!T){try{const h=await Dt(S);o(O=>[...O,{role:"assistant",text:h,ts:L()}]),u(!1)}catch(h){const O=(D=h==null?void 0:h.message)!=null&&D.includes("Failed to fetch")||(A=h==null?void 0:h.message)!=null&&A.includes("NetworkError")?"[error] Cannot reach assistant API - please check connection":`[error] ${String(h)}`;o(U=>[...U,{role:"event",text:O,ts:L()}]),((M=h==null?void 0:h.message)!=null&&M.includes("Failed to fetch")||(P=h==null?void 0:h.message)!=null&&P.includes("NetworkError"))&&u(!0)}l(!1)}}function x(f){f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),C(s))}async function g(){try{const f=await fetch("/api/layout/autotune",{method:"POST",credentials:"include"});if(!f.ok){o(v=>[...v,{role:"event",text:`[autotune] ${f.status} ${f.statusText}`,ts:L()}]);return}o(v=>[...v,{role:"event",text:"[autotune] layout optimized",ts:L()}]),await V()}catch(f){o(v=>[...v,{role:"event",text:`[autotune] error: ${String(f)}`,ts:L()}])}}async function y(){try{const f=await fetch("/api/layout/reset",{method:"POST",credentials:"include"});if(!f.ok){o(v=>[...v,{role:"event",text:`[reset] ${f.status} ${f.statusText}`,ts:L()}]);return}o(v=>[...v,{role:"event",text:"[reset] layout reset to default",ts:L()}]),await V()}catch(f){o(v=>[...v,{role:"event",text:`[reset] error: ${String(f)}`,ts:L()}])}}return m("div",{id:"chat-dock",class:`assistant-panel${p?"":" hidden"}`,"data-testid":"chat-dock",role:"region","aria-label":"Portfolio Assistant","aria-expanded":"true",children:[m("header",{class:"dock-head",children:[m("div",{style:"display:flex; align-items:center; gap:.5rem;",children:[m("strong",{style:"font-weight:600;",children:"Chat"}),d&&m("span",{class:"asst-badge-admin",children:"admin"}),_&&m("span",{class:"asst-badge-offline",title:"Assistant API is offline",style:"background:#ef4444; color:white; padding:2px 6px; border-radius:4px; font-size:11px; font-weight:600;",children:"offline"})]}),m("div",{class:"asst-controls",style:"display:flex; gap:.25rem;",children:[d&&m(q,{children:[m("button",{class:"btn-sm",onClick:g,title:"Admin only: Autotune layout","data-testid":"btn-autotune",children:"Autotune"}),m("button",{class:"btn-sm",onClick:y,title:"Admin only: Reset layout","data-testid":"btn-reset",children:"Reset"})]}),m("button",{id:"dock-toggle",type:"button",class:"dock-btn btn-sm","aria-controls":"assistant-panel","aria-expanded":"true",title:"Collapse (C)","data-testid":"dock-toggle",children:"‚ñ∏"})]})]}),m("div",{class:"dock-body",children:[m("div",{ref:w,class:"asst-log","data-testid":"assistant-log",children:[n.map((f,v)=>m("div",{class:`row ${f.role}`,children:[m("span",{class:"ts",children:Te(f.ts)}),m("span",{class:"bubble",children:f.text})]},v)),a&&m("div",{class:"row event",children:[m("span",{class:"ts",children:Te(L())}),m("span",{class:"bubble",children:"‚Ä¶streaming"})]})]}),m("div",{class:"asst-compose",children:[m("textarea",{"aria-label":"Message",placeholder:_?"Assistant offline - cannot send messages":"Type a message‚Ä¶",value:s,onInput:f=>r(Ot(f)),onKeyDown:f=>x(f),rows:1,disabled:_,style:_?{opacity:.5,cursor:"not-allowed"}:{}}),m("button",{class:"btn",onClick:()=>void C(s),disabled:a||_,"data-testid":"assistant-send",title:_?"API is offline":void 0,children:a?"Sending‚Ä¶":_?"Offline":"Send"})]}),Ht()&&m("details",{class:"asst-debug","data-testid":"assistant-layout-toggle",children:[m("summary",{children:"Layout"}),m("div",{"data-testid":"layout-section",children:t?m("pre",{"data-testid":"assistant-layout-json",children:JSON.stringify(t,null,2)}):m("div",{style:"padding: 1rem; color: #94a3b8;","data-testid":"assistant-layout-empty",children:["Loading layout model...",m("button",{type:"button",class:"btn-sm",onClick:V,style:"margin-left: 0.5rem;","data-testid":"assistant-layout-refresh",children:"Refresh"})]})})]})]}),m("button",{id:"dock-tab",class:"dock-tab","aria-controls":"assistant-panel","aria-expanded":"false",title:"Expand (C)","data-testid":"dock-tab",children:"Chat"})]})}const Ae=document.getElementById("assistant-root");Ae&&(Ve(m(It,{}),Ae),At());
//# sourceMappingURL=main-D1w_OGny.js.map
